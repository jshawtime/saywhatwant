# AI Bot Running on 10.0.0.100 - Complete Documentation

**Last Updated:** October 20, 2025  
**Machine:** Mac Studio 10.0.0.100  
**Purpose:** 24/7 AI Bot for saywhatwant.app

---

## ðŸ“Š System Overview

### What's Running on 10.0.0.100

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mac Studio 10.0.0.100                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                         â”‚
â”‚  âœ… AI Bot (PM2)                        â”‚
â”‚     - Polls Cloudflare KV               â”‚
â”‚     - Processes queue                   â”‚
â”‚     - Sends to LM Studio                â”‚
â”‚     - Posts responses                   â”‚
â”‚     - Port: N/A (background process)    â”‚
â”‚                                         â”‚
â”‚  âœ… WebSocket Server (port 4002)        â”‚
â”‚     - Real-time queue updates           â”‚
â”‚     - Embedded in AI Bot                â”‚
â”‚     - Connects to Queue Monitor         â”‚
â”‚                                         â”‚
â”‚  âœ… Queue Monitor Dashboard (port 5173) â”‚
â”‚     - React/Vite app                    â”‚
â”‚     - Real-time UI                      â”‚
â”‚     - Accessible from network           â”‚
â”‚                                         â”‚
â”‚  âœ… LM Studio Server (port 1234)        â”‚
â”‚     - AI model inference                â”‚
â”‚     - Primary model server              â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ Also connects to:
              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Mac Studio       â”‚
      â”‚ 10.0.0.102:1234  â”‚
      â”‚ (Backup LM Studio)â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ—‚ï¸ File Locations on 10.0.0.100

### AI Bot
```
~/Desktop/AI-Bot-Deploy/
â”œâ”€â”€ SETUP.sh                 # One-command setup script
â”œâ”€â”€ INSTRUCTIONS.txt         # Full deployment guide
â”œâ”€â”€ README.txt               # Quick reference
â”œâ”€â”€ start-ai-bot.sh          # Interactive management
â”œâ”€â”€ create-launcher-app.sh   # Creates Desktop app
â”œâ”€â”€ src/                     # TypeScript source code
â”œâ”€â”€ dist/                    # Compiled JavaScript (created by build)
â”œâ”€â”€ config-aientities.json   # AI entities configuration
â”œâ”€â”€ package.json             # Dependencies
â””â”€â”€ .env                     # Environment variables
```

### Queue Monitor
```
~/Desktop/Queue-Monitor-Deploy/
â”œâ”€â”€ SETUP.sh                 # Setup script
â”œâ”€â”€ INSTRUCTIONS.txt         # Usage guide
â”œâ”€â”€ src/                     # React source code
â”œâ”€â”€ package.json             # Dependencies
â””â”€â”€ .env                     # WebSocket configuration
```

### PM2 Files
```
~/.pm2/
â”œâ”€â”€ logs/
â”‚   â”œâ”€â”€ ai-bot-out.log      # Standard output
â”‚   â””â”€â”€ ai-bot-error.log    # Error output
â””â”€â”€ pids/
    â””â”€â”€ ai-bot.pid          # Process ID
```

---

## ðŸš€ Starting Everything on 10.0.0.100

### Initial Setup (One-Time)

1. **AI Bot:**
   ```bash
   cd ~/Desktop/AI-Bot-Deploy
   bash SETUP.sh
   ```

2. **Queue Monitor:**
   ```bash
   cd ~/Desktop/Queue-Monitor-Deploy
   bash SETUP.sh
   ```

### Daily Usage

#### Start AI Bot
```bash
pm2 start ai-bot
# or if first time:
# cd ~/Desktop/AI-Bot-Deploy
# pm2 start dist/index.js --name ai-bot
```

#### Start Queue Monitor
```bash
cd ~/Desktop/Queue-Monitor-Deploy
npm run dev
```

**Or run in background:**
```bash
cd ~/Desktop/Queue-Monitor-Deploy
nohup npm run dev > ~/queue-monitor.log 2>&1 &
```

---

## ðŸ“± Access URLs

### From Your Dev Mac (or ANY computer on network)

**Queue Monitor Dashboard:**
```
http://10.0.0.100:5173
```

**WebSocket (don't browse to this):**
```
ws://10.0.0.100:4002
```

### From 10.0.0.100 Itself

**Queue Monitor:**
```
http://localhost:5173
```

**WebSocket:**
```
ws://localhost:4002
```

---

## ðŸŽ® Managing the AI Bot (PM2 Commands)

All these commands run on 10.0.0.100:

### Status & Monitoring
```bash
pm2 list                      # Show all processes
pm2 show ai-bot              # Detailed info
pm2 monit                     # Live monitoring dashboard
```

### Logs
```bash
pm2 logs ai-bot              # Live logs (Ctrl+C to exit)
pm2 logs ai-bot --lines 100  # Last 100 lines
pm2 logs ai-bot --err        # Only errors
pm2 flush ai-bot             # Clear logs
```

### Control
```bash
pm2 start ai-bot             # Start (if stopped)
pm2 stop ai-bot              # Stop
pm2 restart ai-bot           # Restart
pm2 reload ai-bot            # Zero-downtime reload
pm2 delete ai-bot            # Remove from PM2
```

### After Code Changes
```bash
cd ~/Desktop/AI-Bot-Deploy
git pull                      # Get latest code (if using git)
# Or copy new files from dev machine
npm run build                 # Rebuild TypeScript
pm2 restart ai-bot           # Restart with new code
pm2 logs ai-bot --lines 20   # Verify it's working
```

---

## ðŸ› ï¸ Managing Queue Monitor

### Start (Foreground)
```bash
cd ~/Desktop/Queue-Monitor-Deploy
npm run dev
# Keep Terminal open, Ctrl+C to stop
```

### Start (Background)
```bash
cd ~/Desktop/Queue-Monitor-Deploy
nohup npm run dev > ~/queue-monitor.log 2>&1 &
# Runs in background, can close Terminal
```

### Check if Running
```bash
lsof -i :5173
# Should show node process
```

### Stop
```bash
# If foreground: Ctrl+C
# If background:
lsof -ti :5173 | xargs kill
```

### View Logs (if running in background)
```bash
tail -f ~/queue-monitor.log
```

---

## ðŸ”§ Configuration Files

### AI Bot `.env`
Location: `~/Desktop/AI-Bot-Deploy/.env`

```bash
# Cloudflare Worker
COMMENTS_WORKER_URL=https://sww-comments.bootloaders.workers.dev/api/comments
COMMENTS_API_KEY=your-api-key-here

# LM Studio Servers
LM_STUDIO_PRIMARY=http://localhost:1234
LM_STUDIO_SECONDARY=http://10.0.0.102:1234

# WebSocket
WEBSOCKET_HOST=0.0.0.0
WEBSOCKET_PORT=4002

# Polling
POLLING_INTERVAL=3000
```

### Queue Monitor `.env`
Location: `~/Desktop/Queue-Monitor-Deploy/.env`

```bash
# WebSocket connection to AI Bot
VITE_WS_URL=ws://localhost:4002
```

### AI Entities Configuration
Location: `~/Desktop/AI-Bot-Deploy/config-aientities.json`

Contains all AI personality configurations (32 entities currently loaded).

---

## ðŸ“ˆ Monitoring & Health Checks

### Check AI Bot Status
```bash
# Quick status
pm2 list | grep ai-bot

# Detailed info
pm2 show ai-bot

# Recent logs
pm2 logs ai-bot --lines 50 --nostream
```

### Check WebSocket
```bash
lsof -i :4002
# Should show: node (ai-bot process)
```

### Check Queue Monitor
```bash
lsof -i :5173
# Should show: node (vite dev server)
```

### Test from Dev Mac
```bash
# Test WebSocket (should connect)
telnet 10.0.0.100 4002

# Test Queue Monitor (should return HTML)
curl http://10.0.0.100:5173
```

---

## ðŸ› Troubleshooting

### AI Bot Won't Start

**Check logs:**
```bash
pm2 logs ai-bot --lines 100
```

**Common issues:**
- Missing `.env` file
- LM Studio not running
- Wrong Cloudflare API key
- Port 4002 already in use

**Fix:**
```bash
cd ~/Desktop/AI-Bot-Deploy
npm run build
pm2 restart ai-bot
```

### Queue Monitor Won't Start

**Check error:**
```bash
cd ~/Desktop/Queue-Monitor-Deploy
npm run dev
# Look at error message
```

**Common issues:**
- Port 5173 already in use
- Missing node_modules
- Missing `.env` file

**Fix:**
```bash
cd ~/Desktop/Queue-Monitor-Deploy
rm -rf node_modules
npm install
npm run dev
```

### Dashboard Shows "Disconnected"

**Means:** Queue Monitor can't connect to WebSocket on port 4002

**Check:**
1. Is AI Bot running?
   ```bash
   pm2 list
   ```

2. Is WebSocket listening?
   ```bash
   lsof -i :4002
   ```

3. Check AI Bot logs:
   ```bash
   pm2 logs ai-bot
   ```

### Can't Access from Dev Mac

**Check firewall on 10.0.0.100:**
- System Settings > Network > Firewall
- Allow Node.js

**Test connectivity:**
```bash
# From dev Mac
ping 10.0.0.100
curl http://10.0.0.100:5173
```

---

## ðŸ”„ Update Procedures

### Update AI Bot Code

**Option 1: Git Pull (if using git)**
```bash
cd ~/Desktop/AI-Bot-Deploy
git pull origin main
npm install              # If dependencies changed
npm run build
pm2 restart ai-bot
```

**Option 2: Copy New Files**
1. Copy updated files from dev Mac to 10.0.0.100
2. ```bash
   cd ~/Desktop/AI-Bot-Deploy
   npm run build
   pm2 restart ai-bot
   ```

### Update Queue Monitor Code

```bash
cd ~/Desktop/Queue-Monitor-Deploy
git pull origin main     # or copy new files
npm install              # If dependencies changed
# Kill and restart:
lsof -ti :5173 | xargs kill
npm run dev
```

### Update AI Entities Configuration

```bash
# Edit the config file
nano ~/Desktop/AI-Bot-Deploy/config-aientities.json

# Restart bot to load changes
pm2 restart ai-bot
```

---

## ðŸš¦ Auto-Start on Boot

### Enable Auto-Start (One-Time Setup)

```bash
# Setup PM2 to start on boot
pm2 startup

# Run the command it prints (starts with sudo)
sudo env PATH=$PATH:...

# Save current process list
pm2 save
```

### What Happens on Reboot

1. âœ… PM2 starts automatically
2. âœ… AI Bot starts automatically
3. âŒ Queue Monitor does NOT start automatically (you need to start it)

### To Also Auto-Start Queue Monitor

Create a LaunchAgent:

```bash
# Create plist file
cat > ~/Library/LaunchAgents/com.saywhatwant.queuemonitor.plist << 'EOF'
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.saywhatwant.queuemonitor</string>
    <key>ProgramArguments</key>
    <array>
        <string>/opt/homebrew/bin/npm</string>
        <string>run</string>
        <string>dev</string>
    </array>
    <key>WorkingDirectory</key>
    <string>/Users/ms1281/Desktop/Queue-Monitor-Deploy</string>
    <key>RunAtLoad</key>
    <true/>
    <key>KeepAlive</key>
    <true/>
    <key>StandardOutPath</key>
    <string>/Users/ms1281/queue-monitor.log</string>
    <key>StandardErrorPath</key>
    <string>/Users/ms1281/queue-monitor-error.log</string>
</dict>
</plist>
EOF

# Load it
launchctl load ~/Library/LaunchAgents/com.saywhatwant.queuemonitor.plist
```

---

## ðŸ“Š System Requirements

### Currently Using
- **Node.js:** v24.10.0
- **npm:** v11.6.0
- **PM2:** Latest (installed globally)
- **macOS:** 25.0.0

### Resource Usage (Typical)
- **AI Bot:** ~100-200 MB RAM
- **Queue Monitor:** ~50-100 MB RAM
- **LM Studio:** ~8-16 GB RAM (depending on model)

---

## ðŸŽ¯ Workflow Summary

### Daily Development Workflow

**On Dev Mac:**
1. Make code changes
2. Test locally (optional)
3. Push to GitHub (or copy to 10.0.0.100)

**On 10.0.0.100:**
1. Pull/copy new code
2. Rebuild: `npm run build`
3. Restart: `pm2 restart ai-bot`
4. Monitor: `pm2 logs ai-bot`

**From Any Computer:**
1. Open: `http://10.0.0.100:5173`
2. Watch the queue monitor
3. Verify bot is working

---

## ðŸ“ž Quick Reference

### Most Common Commands

```bash
# Check status
pm2 list

# View logs
pm2 logs ai-bot

# Restart bot
pm2 restart ai-bot

# Start queue monitor
cd ~/Desktop/Queue-Monitor-Deploy && npm run dev

# Stop queue monitor
lsof -ti :5173 | xargs kill
```

### Most Common URLs

```
Queue Monitor: http://10.0.0.100:5173
Production App: https://saywhatwant.app
```

### Most Common Issues

1. **Bot not responding:** `pm2 restart ai-bot`
2. **Dashboard disconnected:** Check `lsof -i :4002`
3. **Can't access from network:** Check firewall

---

## âœ… Success Checklist

After setup, verify:

- [ ] `pm2 list` shows ai-bot as "online"
- [ ] `lsof -i :4002` shows WebSocket listening
- [ ] `lsof -i :5173` shows Vite dev server
- [ ] Can access `http://10.0.0.100:5173` from dev Mac
- [ ] Dashboard shows "CONNECTED" (green)
- [ ] Post a comment on saywhatwant.app
- [ ] See it appear in queue monitor
- [ ] See AI response get posted
- [ ] `pm2 logs ai-bot` shows no errors

---

## ðŸŽ‰ Benefits of This Setup

âœ… **Bot runs 24/7** on dedicated hardware  
âœ… **Dev Mac can sleep/shutdown**  
âœ… **Queue monitor accessible from anywhere**  
âœ… **Easy to update** via git pull or file copy  
âœ… **Easy to monitor** via web dashboard  
âœ… **Auto-restarts** if it crashes (PM2)  
âœ… **Can auto-start** on boot  
âœ… **Lower latency** (bot near LM Studio)  
âœ… **Centralized logs** via PM2  
âœ… **Remote management** via SSH

---

**Last Updated:** October 20, 2025  
**Next Review:** When making major changes to bot or infrastructure

